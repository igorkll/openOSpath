local a="/bios/bios.lua"local b=component.proxy(component.list("eeprom")())local function c(d,e)local f=d.open(e)local g=""while true do local h=d.read(f,math.huge)if h==nil then break end;g=g..h end;d.close(f)return g end;local function i(d,e,...)local j,k=assert(load(c(d,e)))assert(xpcall(j,debug.traceback,...))end;computer.getBiosAddress=b.getData;computer.setBiosAddress=b.setData;local l;local m;local n;do local o=component.list("gpu")()local p=component.list("screen")()if o and p then local q=component.proxy(o)local r=q.getScreen()if r then p=r else q.bind(p)end;l=q;m=p;n=component.proxy(m).getKeyboards()[1]end end;local function s()local t,u=l.getResolution()local v=l.setBackground(0)local w=l.setForeground(0xFFFFFF)l.fill(1,1,t,u," ")l.setBackground(v)l.setForeground(w)end;local function x()local y=l.getBackground()local z=l.getForeground()l.setBackground(z)l.setForeground(y)end;local function A(B,C)local t,u=l.getResolution()l.set(math.floor(t/2-unicode.len(B)/2)+1,C,B)end;local function D(E,F)local t,u=l.getResolution()local G=(F or 1)+1;local v=l.setBackground(0)local w=l.setForeground(0xFFFFFF)local H=G;while true do l.fill(1,1,t,u," ")local I=1;local J=math.floor((H-1)/u)*u+1;for K=J,#E do if I>u then break end;if K==H or K==1 then x()end;A(E[K],I)if K==H or K==1 then x()end;I=I+1 end;local L,M,N,O,P=computer.pullSignal()if L=="key_down"and M==n then if O==200 then if H>2 then H=H-1 end elseif O==208 then if H<#E then H=H+1 end elseif O==28 then return H-1 end elseif L=="touch"and M==m then if O>1 and O<=#E+1 then return O-1 end elseif L=="scroll"and M==m then if P==-1 then if H<#E then H=H+1 end else if H>2 then H=H-1 end end end end;l.setBackground(v)l.setForeground(w)end;local function Q(d,e)local R=d.list(e)for K=1,#R do local f=e..R[K]if d.isDirectory(f)then Q(f)else d.remove(f)end end end;local function S(T,C)local U={posX=T,posY=C,keyboard=n}local g=""while true do l.set(U.posX,U.posY,"_")local L,M,V,j=computer.pullSignal()if L=="key_down"and M==U.keyboard then if j==28 then return g elseif j==14 then if unicode.len(g)>0 then g=unicode.sub(g,1,unicode.len(g)-1)l.set(U.posX,U.posY," ")U.posX=U.posX-1;l.set(U.posX,U.posY," ")end elseif V~=0 then g=g..unicode.char(V)l.set(U.posX,U.posY,unicode.char(V))U.posX=U.posX+1 end elseif L=="clipboard"and M==U.keyboard then g=g..V;l.set(U.posX,U.posY,V)U.posX=U.posX+unicode.len(V)if unicode.sub(V,unicode.len(V),unicode.len(V))=="\n"then return unicode.sub(g,1,unicode.len(g)-1)end end end end;local function W(X,Y)s()l.set(1,1,X.."ENTER PASSWORD: ")local S=S(1,2)if S==Y then return true end;return false end;local function Z()local function _(a0,a1)local a2={}local a3={}local a4={}for a5,a6 in component.list(a0)do if a1 and a1(component.proxy(a5))or not a1 then a3[#a3+1]=a5;a4[#a4+1]=a6;a2[#a2+1]=a5:sub(1,8)..":"..a6;local a7=component.proxy(a5)if a7.getLabel and a7.getLabel()and a7.getLabel()~=""then a2[#a2]=a2[#a2]..":"..a7.getLabel()end end end;return a2,a3,a4 end;while true do local a2,a3=_("filesystem",function(d)return d.exists(a)end)local a8=D({"select bios","back",table.unpack(a2)})if a8==1 then break else a8=a8-1;local a5=a3[a8]local d=component.proxy(a5)local a9="/bios/configs/biospassword"local aa=d.exists(a9)if aa and W("enter password: ",c(d,a9))or not aa then local ab=D({"select bios","back","reset","rm autorun script","set bootable"})if ab==2 then Q(d,"/bios/configs/")elseif ab==3 then d.remove("/bios/configs/autorun.lua")elseif ab==4 then b.setData(a5)end end end end;computer.shutdown(true)end;if l and m and n then for K=1,10 do local L,M,N,j=computer.pullSignal(0.1)if L=="key_down"and M==n then if j==42 then Z()break end end end end;local d=component.proxy(b.getData())if d then if d.exists(a)then i(d,a)else error("bios is not found")end else error("filesystem in not found")end